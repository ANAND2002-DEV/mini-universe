<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mini Universe ‚Äî MAIN HTML</title>

<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:black;
  font-family:Arial,sans-serif;
}

/* ===== MODALS ===== */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.8);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:999;
}
.modal-card{
  background:#0b0b0b;
  border-radius:16px;
  padding:22px;
  max-width:520px;
  color:#fff;
  text-align:center;
  box-shadow:0 0 40px rgba(0,0,0,0.7);
}
.modal-card img,
.modal-card video{
  width:100%;
  border-radius:12px;
}
.close-btn{
  margin-top:12px;
  cursor:pointer;
  opacity:0.85;
}
.close-btn:hover{opacity:1;}
#sunModal .modal-card{
  border:1px solid rgba(255,200,80,0.5);
  color:#ffd27d;
}

/* ===== STAR LEGEND ===== */
#legend{
  position:fixed;
  bottom:20px;
  left:20px;
  background:rgba(0,0,0,0.65);
  backdrop-filter:blur(6px);
  padding:12px 16px;
  border-radius:14px;
  color:#fff;
  font-size:13px;
  z-index:2000;
}
#legend h3{
  margin:0 0 8px;
  font-size:14px;
}
#legend div{
  display:flex;
  align-items:center;
  margin:4px 0;
}
.dot{
  width:10px;
  height:10px;
  border-radius:50%;
  margin-right:8px;
}

/* Legend colors */
.dot.video{background:#1f6fff;}        /* Video Memories */
.dot.memory{background:#ff2a2a;}       /* Our Moments */
.dot.shayari{background:#d63384;}      /* Shayari & Feelings */
.dot.promise{background:#b8860b;}      /* Promises */

</style>

<script type="importmap">
{
  "imports": {
    "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js"
  }
}
</script>

<style>
@keyframes birthdayGlow {
  0%   { box-shadow:0 0 8px rgba(170,100,255,0.6); }
  50%  { box-shadow:0 0 22px rgba(200,150,255,1); }
  100% { box-shadow:0 0 8px rgba(170,100,255,0.6); }
}
</style>

</head>

<body>

<!-- üéµ MICRO MUSIC CONTROL PILL -->
<div id="musicPill" style="
  position:fixed;
  top:12px;
  left:12px;
  z-index:5000;
  display:none;
  gap:8px;
  align-items:center;
  padding:6px 8px;
  background:rgba(0,0,0,0.25);
  backdrop-filter: blur(8px);
  border-radius:999px;
">
  <button id="pillPlay" style="
    width:28px;height:28px;
    border:none;
    border-radius:50%;
    background:rgba(255,255,255,0.15);
    color:#fff;
    cursor:pointer;
  ">‚ñ∂</button>

  <button id="pillExit" style="
    width:28px;height:28px;
    border:none;
    border-radius:50%;
    background:rgba(255,120,200,0.25);
    color:#fff;
    cursor:pointer;
  ">‚úï</button>
</div>




<!-- ‚ú® SHAYARI MODAL -->
<div id="shayariModal" class="modal">
  <div class="modal-card">
    <h2>‚ú® Shayari</h2>
    <p id="shayariText" style="white-space:pre-line; line-height:1.6;"></p>
    <div class="close-btn" onclick="closeAll()">Close</div>
  </div>
</div>


<!-- ‚òÄÔ∏è SUN MODAL -->
<div id="sunModal" class="modal">
  <div class="modal-card">
    <h2>‚òÄÔ∏è Our First Meet</h2>
    <p id="meetingText" style="white-space:pre-line; line-height:1.6;"></p>
    <div class="close-btn" onclick="closeAll()">Close</div>
  </div>
</div>



<!-- ‚≠ê STAR INDEX NAVIGATOR (1‚Äì25) -->
<div id="starNav" style="
position:fixed;
bottom:20px;
left:50%;
transform:translateX(-50%);
display:flex;
flex-wrap:wrap;
justify-content:center;
gap:8px;
max-width:92%;
z-index:3000;
background:rgba(0,0,0,0.55);
backdrop-filter:blur(6px);
padding:10px 14px;
border-radius:16px;
font-size:11px;
">
</div>

<style>
.navDot{
  width:12px;
  height:12px;
  border-radius:50%;
  cursor:pointer;
  box-shadow:0 0 6px rgba(255,255,255,0.4);
}
.navDot.video{background:#1f6fff;}
.navDot.shayari{background:#d63384;}
.navDot.promise{background:#b8860b;}
.navDot.memory{background:#ff2a2a;}
.navDot.aiBirthday{background:#ff77cc;}
.navDot.yotoBirthday{background:#7b3fe4;}
</style>


<!-- ‚≠ê PROMISE MODAL -->
<div id="promiseModal" class="modal">
  <div class="modal-card" style="
    border:2px solid rgba(255,215,120,0.95);
    box-shadow:0 0 70px rgba(255,215,120,0.95);
    max-height:70vh;
    overflow:auto;
  ">
    <h2 id="promiseTitle" style="color:#ffd27d;"></h2>
    <p id="promiseText" style="white-space:pre-line; line-height:1.7;"></p>
    <div class="close-btn" onclick="closeAll()">Close</div>
  </div>
</div>


<!-- ‚úÖ START SCREEN CONTROLLER (NON-MODULE) -->
<script>
(function(){
  const start = () => {
    const startScreen = document.getElementById("startScreen");
    const musicBtn = document.getElementById("musicBtn");
    const enterBtn = document.getElementById("enterBtn");
    const bgMusic = document.getElementById("bgMusic");

    if (!startScreen || !musicBtn || !enterBtn || !bgMusic) {
      console.warn("Start screen elements missing");
      return;
    }

    let playing = false;

    musicBtn.addEventListener("click", () => {
      if (!playing) {
        bgMusic.play()
          .then(() => {
            playing = true;
            musicBtn.innerText = "‚è∏ Pause Music";
          })
          .catch(err => console.error("Music blocked:", err));
      } else {
        bgMusic.pause();
        playing = false;
        musicBtn.innerText = "‚ñ∂ Play Music";
      }
    });

    enterBtn.addEventListener("click", () => {
      startScreen.style.transition = "opacity 1s ease";
      startScreen.style.opacity = "0";
      setTimeout(() => {
        startScreen.style.display = "none";
        startScreen.style.pointerEvents = "none";
      }, 1000);
    });
  };

  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", start);
  } else {
    start();
  }
})();
</script>


<!-- üéµ MICRO CONTROL LOGIC -->
<script>
(function(){
  const init = () => {
    const pill = document.getElementById("musicPill");
    const playBtn = document.getElementById("pillPlay");
    const exitBtn = document.getElementById("pillExit");
    const music = document.getElementById("bgMusic");
    const startScreen = document.getElementById("startScreen");

    if (!pill || !playBtn || !exitBtn || !music) return;

    let playing = false;

    // show pill after entering universe
    const enterBtn = document.getElementById("enterBtn");
    if (enterBtn) {
      enterBtn.addEventListener("click", () => {
        setTimeout(() => pill.style.display = "flex", 1100);
      });
    }

    playBtn.onclick = () => {
      if (!playing) {
        music.play().then(() => {
          playing = true;
          playBtn.textContent = "‚è∏";
        });
      } else {
        music.pause();
        playing = false;
        playBtn.textContent = "‚ñ∂";
      }
    };

    exitBtn.onclick = () => {
      music.pause();
      playing = false;
      playBtn.textContent = "‚ñ∂";
      pill.style.display = "none";

      if (startScreen) {
        startScreen.style.display = "flex";
        startScreen.style.opacity = "1";
        startScreen.style.pointerEvents = "auto";
      }
    };
  };

  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", init);
  } else {
    init();
  }
})();
</script>

</body>
</html>
